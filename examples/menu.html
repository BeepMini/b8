<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>Menu</title>
	<meta name="description" content="A demo of the Menu system.">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<link rel="stylesheet" href="example.css">
	<script src="../dist/b8.js"></script>

	<script>

		async function main() {
			while ( true ) {
				// Clear screen using white over blue
				b8.color( 12, 1 );
				b8.cls();
				b8.locate( 1, 1 );
				b8.print( "System Boot Menu\n\n" );
				b8.color( 1, 12 );
				// Show a menu of options.
				const choice = await b8.Async.menu(
					[
						"Install OS",
						"Format disk",
						"Eject disk",
						"Enter Passcode",
						"Fix disk"
					]
				);
				b8.color( 6, 2 );
				// Show a message box depending on the choice.
				switch ( choice ) {
					case 0: await b8.Async.dialog( "128kB of memory\nneeded", [ "OK" ] ); break;
					case 1:
						if ( await b8.Async.dialog( "Are you sure?", [ "No", "Yes" ] ) ) await formatDisk();
						break;
					case 2: await b8.Async.dialog( "Can't eject.\nDisk in use." ); break;
					case 3: await b8.Passcodes.input(); break;
					case 4: await b8.Async.dialog( "No problems detected." ); break;
				}
			}
		}

		async function formatDisk() {
			b8.color( 12, 1 );
			b8.cls();
			b8.locate( 1, 2 );
			b8.print( "Formating disk...\n" );
			for ( let i = 0; i <= 80; i += 10 ) {
				b8.locate( 1, 4 );
				b8.print( `Track ${i}/80...` );
				await b8.Async.wait( 0.5 );
			}
			b8.color( 6, 2 );
			await b8.Async.dialog( "Successfully formatted" );
		}

		window.addEventListener( "load", () => b8.init( main ) );
	</script>
</head>

<body>
</body>

</html>